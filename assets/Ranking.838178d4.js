import{u as C}from"./examStore.6f1c53fc.js";import"./lodash.c89772f8.js";import{u as k}from"./userStore.0a3b7e56.js";import{m as $,a as R}from"./formatData.16acd92b.js";import{a as _}from"./api.0fbf7522.js";import{l as m,r as L,o as r,c as u,a as e,t as o,u as h,F as f,b as E,g as v,d as N,w as S,H as j}from"./index.ff7f570d.js";const T={class:"text-center"},U=e("h1",{class:"my-4 text-3xl font-bold text-center text-gray-900"},"\u09AB\u09B2\u09BE\u09AB\u09B2",-1),A={class:"flex justify-between max-w-xl mx-auto my-5"},B={class:"max-w-xl mx-auto my-3"},V={class:"form-control"},P={class:"mt-4"},D={key:0},F={class:"flex items-center justify-center w-10 h-10 font-semibold text-white bg-green-500 rounded-full"},O={class:"flex-1 ml-2 text-gray-900 md:ml-4"},q={class:"text-lg font-semibold"},z={class:"text-sm text-gray-500"},H={class:"flex items-center justify-center w-10 h-10 p-2 font-semibold text-center text-gray-900 rounded-full aspect-square"},K={key:1,class:"text-center"},G=e("button",{class:"btn loader btn-primary"},"Loading...",-1),I=[G],ee={setup(J){const{getExam:b}=C(),i=b(),c=m([]),d=m([]);m(null),k();const p=m(!1),x=async()=>{let{data:a}=await _.get(`/exam/${i._id}/leaderboard?admin=true`);c.value=a.map((s,l)=>({position:l+1,duration:$(s.duration,i.duration*6e4),score:s.marks,name:s.user.name,phone:s.user.phone,attempt:s.attempt,college:s.user.institute,status:s.status})),d.value=c.value};x();const g=a=>{let s=a.target.value;s?d.value=c.value.filter(l=>l.name.toLowerCase().includes(s.toLowerCase())):d.value=c.value},w=async()=>{p.value=!0;const a=prompt("Enter password to calculate result");await _.post(`/exam/${i._id}/calculate-result?password=${a}`),p.value=!1,x()},y=()=>{let a=`Position,Name,College,Phone,Duration,Score
`;c.value.forEach(n=>{a+=`${n.position},${n.name},${n.college.replace(/\,/g," ")},${n.phone},${n.duration},${n.score}
`});const s=new Blob([a],{type:"text/csv"}),l=window.URL.createObjectURL(s),t=document.createElement("a");t.setAttribute("hidden",""),t.setAttribute("href",l),t.setAttribute("download",`${i.title}.csv`),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),t.remove()};return(a,s)=>{const l=L("spa");return r(),u(f,null,[e("div",T,[U,e("h2",null,o(h(i).title),1),e("h3",null," Total Participants: "+o(c.value.length),1)]),e("div",A,[e("button",{onClick:w,class:"px-5 py-2 font-semibold text-white bg-blue-500 rounded-md"},o(p.value?"Calculating...":"Calculate Result"),1),e("button",{onClick:y,class:"px-5 py-2 font-semibold text-white bg-green-500 rounded-md"}," Export to CSV ")]),e("div",B,[e("div",V,[e("input",{placeholder:"\u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09B0\u09CD\u09A5\u09C0 \u0985\u09A5\u09AC\u09BE \u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09AA\u09CD\u09B0\u09A4\u09BF\u09B7\u09CD\u09A0\u09BE\u09A8\u09C7\u09B0 \u09A8\u09BE\u09AE \u09A6\u09BF\u09DF\u09C7 \u0996\u09C1\u0981\u099C\u09C1\u09A8... ",onKeyup:g,class:"rounded-md input input-bordered"},null,32)]),e("div",P,[c.value.length>0?(r(),u("div",D,[(r(!0),u(f,null,E(d.value,(t,n)=>(r(),u("div",{key:n,class:"flex items-center px-3 py-2 mb-2 border shadow-sm rounded-2xl"},[e("span",F,o(h(R)(t.position)),1),e("div",O,[e("h2",q,o(t.name),1),e("p",null,o(t.college),1),e("p",z,[v(" Attempts: "+o(t.attempt)+", \u09B8\u09AE\u09DF: "+o(t.duration)+" \u09AE\u09BF\u09A8\u09BF\u099F ",1),N(l,{class:j({"text-green-500":t.status==="completed","text-red-500":t.status==="pending"})},{default:S(()=>[v(" Status: "+o(t.status==="completed"?"Calculated":"Not Calculated"),1)]),_:2},1032,["class"])])]),e("div",H,[e("span",null,o(t.score),1)])]))),128))])):(r(),u("div",K,I))])])],64)}}};export{ee as default};
