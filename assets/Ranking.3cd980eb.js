import{u as C,l as m,H as k,r as $,o as u,c as d,a as e,t as a,d as h,F as _,b as L,L as v,h as b,e as R,w as E,I as N}from"./index.fa6901f6.js";import"./lodash.9e0595d9.js";import{m as S,a as j}from"./formatData.16acd92b.js";const T={class:"text-center"},U=e("h1",{class:"my-4 text-3xl font-bold text-center text-gray-900"},"\u09AB\u09B2\u09BE\u09AB\u09B2",-1),A={class:"flex justify-between max-w-xl mx-auto my-5"},B={class:"max-w-xl mx-auto my-3"},V={class:"form-control"},P={class:"mt-4"},D={key:0},F={class:"flex items-center justify-center w-10 h-10 font-semibold text-white bg-green-500 rounded-full"},O={class:"flex-1 ml-2 text-gray-900 md:ml-4"},q={class:"text-lg font-semibold"},z={class:"text-sm text-gray-500"},H={class:"flex items-center justify-center w-10 h-10 p-2 font-semibold text-center text-gray-900 rounded-full aspect-square"},I={key:1,class:"text-center"},K=e("button",{class:"btn loader btn-primary"},"Loading...",-1),G=[K],X={setup(J){const{getExam:f}=C(),i=f(),c=m([]),r=m([]);m(null),k();const p=m(!1),x=async()=>{let{data:o}=await v.get(`/exam/${i._id}/leaderboard?admin=true`);c.value=o.map((s,l)=>({position:l+1,duration:S(s.duration,i.duration*6e4),score:s.marks,name:s.user.name,phone:s.user.phone,attempt:s.attempt,college:s.user.institute,status:s.status})),r.value=c.value};x();const g=o=>{let s=o.target.value;s?r.value=c.value.filter(l=>l.name.toLowerCase().includes(s.toLowerCase())):r.value=c.value},w=async()=>{p.value=!0;const o=prompt("Enter password to calculate result");await v.post(`/exam/${i._id}/calculate-result?password=${o}`),p.value=!1,x()},y=()=>{let o=`Position,Name,College,Phone,Duration,Score
`;c.value.forEach(n=>{o+=`${n.position},${n.name},${n.college.replace(/\,/g," ")},${n.phone},${n.duration},${n.score}
`});const s=new Blob([o],{type:"text/csv"}),l=window.URL.createObjectURL(s),t=document.createElement("a");t.setAttribute("hidden",""),t.setAttribute("href",l),t.setAttribute("download",`${i.title}.csv`),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),t.remove()};return(o,s)=>{const l=$("spa");return u(),d(_,null,[e("div",T,[U,e("h2",null,a(h(i).title),1),e("h3",null," Total Participants: "+a(c.value.length),1)]),e("div",A,[e("button",{onClick:w,class:"px-5 py-2 font-semibold text-white bg-blue-500 rounded-md"},a(p.value?"Calculating...":"Calculate Result"),1),e("button",{onClick:y,class:"px-5 py-2 font-semibold text-white bg-green-500 rounded-md"}," Export to CSV ")]),e("div",B,[e("div",V,[e("input",{placeholder:"\u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09B0\u09CD\u09A5\u09C0 \u0985\u09A5\u09AC\u09BE \u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09AA\u09CD\u09B0\u09A4\u09BF\u09B7\u09CD\u09A0\u09BE\u09A8\u09C7\u09B0 \u09A8\u09BE\u09AE \u09A6\u09BF\u09DF\u09C7 \u0996\u09C1\u0981\u099C\u09C1\u09A8... ",onKeyup:g,class:"rounded-md input input-bordered"},null,32)]),e("div",P,[c.value.length>0?(u(),d("div",D,[(u(!0),d(_,null,L(r.value,(t,n)=>(u(),d("div",{key:n,class:"flex items-center px-3 py-2 mb-2 border shadow-sm rounded-2xl"},[e("span",F,a(h(j)(t.position)),1),e("div",O,[e("h2",q,a(t.name),1),e("p",null,a(t.college),1),e("p",z,[b(" Attempts: "+a(t.attempt)+", \u09B8\u09AE\u09DF: "+a(t.duration)+" \u09AE\u09BF\u09A8\u09BF\u099F ",1),R(l,{class:N({"text-green-500":t.status==="completed","text-red-500":t.status==="pending"})},{default:E(()=>[b(" Status: "+a(t.status==="completed"?"Calculated":"Not Calculated"),1)]),_:2},1032,["class"])])]),e("div",H,[e("span",null,a(t.score),1)])]))),128))])):(u(),d("div",I,G))])])],64)}}};export{X as default};
