import{u as k}from"./examStore.f8ea808a.js";import"./lodash.b038bd78.js";import{u as R}from"./userStore.99522cca.js";import{m as $,a as L}from"./formatData.16acd92b.js";import{a as h}from"./api.516ee552.js";import{m as E,l as m,r as N,o as r,c as u,a as e,u as x,t as o,f as S,F as f,b as j,g as v,d as T,w as U,H as V}from"./index.b0603cf3.js";const A={class:"text-center"},B=e("h1",{class:"my-4 text-3xl font-bold text-center text-gray-900"},"\u09AB\u09B2\u09BE\u09AB\u09B2",-1),P={key:0},D={class:"flex justify-between max-w-xl mx-auto my-5"},F={class:"max-w-xl mx-auto my-3"},O={class:"form-control"},q={class:"mt-4"},z={key:0},H={class:"flex items-center justify-center w-10 h-10 font-semibold text-white bg-green-500 rounded-full"},K={class:"flex-1 ml-2 text-gray-900 md:ml-4"},G={class:"text-lg font-semibold"},I={class:"text-sm text-gray-500"},J={class:"flex items-center justify-center w-10 h-10 p-2 font-semibold text-center text-gray-900 rounded-full aspect-square"},M={key:1,class:"text-center"},Q=e("button",{class:"btn loader btn-primary"},"Loading...",-1),W=[Q],ae={setup(X){const{getExam:b}=k(),g=E(),i=b(),c=m([]),d=m([]);m(null),R();const p=m(!1),_=async()=>{let{data:a}=await h.get(`/exam/${g.params.id}/leaderboard?admin=true`);c.value=a.map((s,l)=>({position:l+1,duration:$(s.duration,i.duration*6e4),score:s.marks,name:s.user.name,phone:s.user.phone,attempt:s.attempt,college:s.user.institute,status:s.status})),d.value=c.value};_();const w=a=>{let s=a.target.value;s?d.value=c.value.filter(l=>l.name.toLowerCase().includes(s.toLowerCase())):d.value=c.value},y=async()=>{p.value=!0;const a=prompt("Enter password to calculate result");await h.post(`/exam/${i._id}/calculate-result?password=${a}`),p.value=!1,_()},C=()=>{let a=`Position,Name,College,Phone,Duration,Score
`;c.value.forEach(n=>{a+=`${n.position},${n.name},${n.college.replace(/\,/g," ")},${n.phone},${n.duration},${n.score}
`});const s=new Blob([a],{type:"text/csv"}),l=window.URL.createObjectURL(s),t=document.createElement("a");t.setAttribute("hidden",""),t.setAttribute("href",l),t.setAttribute("download",`${i.title}.csv`),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),t.remove()};return(a,s)=>{const l=N("spa");return r(),u(f,null,[e("div",A,[B,x(i)?(r(),u("h2",P,o(x(i).title),1)):S("",!0),e("h3",null," Total Participants: "+o(c.value.length),1)]),e("div",D,[e("button",{onClick:y,class:"px-5 py-2 font-semibold text-white bg-blue-500 rounded-md"},o(p.value?"Calculating...":"Calculate Result"),1),e("button",{onClick:C,class:"px-5 py-2 font-semibold text-white bg-green-500 rounded-md"}," Export to CSV ")]),e("div",F,[e("div",O,[e("input",{placeholder:"\u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09B0\u09CD\u09A5\u09C0 \u0985\u09A5\u09AC\u09BE \u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09AA\u09CD\u09B0\u09A4\u09BF\u09B7\u09CD\u09A0\u09BE\u09A8\u09C7\u09B0 \u09A8\u09BE\u09AE \u09A6\u09BF\u09DF\u09C7 \u0996\u09C1\u0981\u099C\u09C1\u09A8... ",onKeyup:w,class:"rounded-md input input-bordered"},null,32)]),e("div",q,[c.value.length>0?(r(),u("div",z,[(r(!0),u(f,null,j(d.value,(t,n)=>(r(),u("div",{key:n,class:"flex items-center px-3 py-2 mb-2 border shadow-sm rounded-2xl"},[e("span",H,o(x(L)(t.position)),1),e("div",K,[e("h2",G,o(t.name),1),e("p",null,o(t.college),1),e("p",I,[v(" Attempts: "+o(t.attempt)+", \u09B8\u09AE\u09DF: "+o(t.duration)+" \u09AE\u09BF\u09A8\u09BF\u099F ",1),T(l,{class:V({"text-green-500":t.status==="completed","text-red-500":t.status==="pending"})},{default:U(()=>[v(" Status: "+o(t.status==="completed"?"Calculated":"Not Calculated"),1)]),_:2},1032,["class"])])]),e("div",J,[e("span",null,o(t.score),1)])]))),128))])):(r(),u("div",M,W))])])],64)}}};export{ae as default};
