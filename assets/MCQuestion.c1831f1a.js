import{_ as P}from"./examloading.f66f2dcc.js";import{u as V}from"./examStore.d73e1555.js";import{_ as j,u as q,a as z}from"./plugin-vue_export-helper.151901dd.js";import{o as s,c as o,a as e,t as f,k as G,l as p,s as F,e as O,w as y,d as x,u as l,n as J,f as T,F as M,b as L,H as C,I as U,J as W,j as K}from"./index.a6bab046.js";import{u as X}from"./userStore.c72e8690.js";import{Q as H,_ as Z,G as ee,Y as te}from"./headlessui.esm.504073e1.js";import{a as Q}from"./api.2abe5486.js";const se={props:{end_time:{type:Number,required:!0}},data(){return{minute:0,second:0}},mounted(){this.startTimer()},methods:{startTimer(){let a=new Date(this.end_time).getTime(),v=setInterval(()=>{let d=new Date().getTime(),t=a-d,r=Math.floor(t%(1e3*60*60)/(1e3*60)),c=Math.floor(t%(1e3*60)/1e3);this.minute=r,this.second=c,t<0&&clearInterval(v)},1e3)},stopTimer(){clearInterval(this.interval)}}},oe={class:"text-2xl btn"};function ae(a,v,d,t,r,c){return s(),o("div",null,[e("div",oe,f(r.minute)+" : "+f(r.second),1)])}var ne=j(se,[["render",ae]]),le="/omarfaruk/assets/retake.3235226f.gif",ie="/omarfaruk/assets/submit.38475667.png";const R=G("result",()=>{const a=p({type:"",score:0,show:!1});return{result:a,showResult:(t,r)=>{a.value.type=r,a.value.score=t,a.value.show=!0},closeModal:()=>{a.value.show=!1}}}),re={class:"fixed inset-0 z-10 overflow-y-auto"},ce={class:"min-h-screen px-4 text-center bg-[rgba(0,0,0,0.6)]"},de=e("span",{class:"inline-block h-screen align-middle","aria-hidden":"true"}," \u200B ",-1),ue={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},me={class:"mt-2"},_e={key:0,src:le,class:"mx-auto h-36",alt:""},pe={key:1,class:"mx-auto h-36",src:ie,alt:""},ve={class:"text-2xl font-semibold text-center"},he={setup(a){const v=R(),{result:d}=F(v),t=()=>{v.closeModal()};return(r,c)=>(s(),O(l(te),{appear:"",show:l(d).show,as:"template"},{default:y(()=>[x(l(ee),{as:"div",onClose:t},{default:y(()=>[e("div",re,[e("div",ce,[x(l(H),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:y(()=>[x(l(Z),{class:"fixed inset-0"})]),_:1}),de,x(l(H),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:y(()=>[e("div",ue,[e("div",me,[l(d).type=="retake"?(s(),o("img",_e)):(s(),o("img",pe)),e("p",ve," You scored: "+f(l(d).score),1)]),e("div",{class:"mt-4 text-right"},[e("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t}," Got it, thanks! ")])])]),_:1})])])]),_:1})]),_:1},8,["show"]))}};const I=a=>(U("data-v-4d48fd2c"),a=a(),W(),a),fe={key:0,class:"flex items-center justify-center min-h-[80vh]"},xe={class:"max-w-md p-5 m-4 mx-auto space-y-4 text-center border bg-slate-100 rounded-2xl outline-dashed"},be={class:"text-2xl font-bold text-gray-900"},ge={class:"text-lg text-gray-700"},we={key:0},ye={key:1},ke=I(()=>e("p",null,"You can practice this exam now.",-1)),$e={key:2},Se={key:1,class:"container mx-auto"},Te={key:0,class:"pb-10"},Me={class:"py-4 text-center"},Ce=["innerHTML"],Ie=I(()=>e("p",{class:"text-center"}," \u09AA\u09CD\u09B0\u09A4\u09BF\u099F\u09BF \u09AA\u09CD\u09B0\u09B6\u09CD\u09A8\u09C7\u09B0 \u0995\u09CD\u09B7\u09C7\u09A4\u09CD\u09B0\u09C7 \u09A4\u09C1\u09AE\u09BF \u0995\u09C7\u09AC\u09B2 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u0995\u09B0\u09BE\u09B0 \u09B8\u09C1\u09AF\u09CB\u0997 \u09AA\u09BE\u09AC\u09C7\u0964 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u09B8\u09BF\u09B2\u09C7\u0995\u09CD\u099F \u0995\u09B0\u09BE\u09B0 \u09AA\u09B0 \u09A4\u09BE \u09AA\u09B0\u09BF\u09AC\u09B0\u09CD\u09A4\u09A8 \u0995\u09B0\u09BE\u09B0 \u0995\u09CB\u09A8\u09CB \u09B8\u09C1\u09AF\u09CB\u0997 \u09A8\u09BE\u0987\u0964 ",-1)),Ne={class:"mx-2 md:w-2/3 md:mx-auto"},De=["innerHTML"],Le={class:"flex gap-2"},He={class:"btn btn-sm"},Qe=I(()=>e("button",{class:"btn btn-sm"},"Marks: "+f(1),-1)),je={class:"mt-3"},Re=["innerHTML","onClick"],Ye={class:"mb-10 text-center"},Be=["disabled"],Ae={key:1,class:"fixed__timer"},Ee={key:2,class:"flex flex-col items-center justify-center w-full h-screen"},Pe=K('<img src="'+P+'" alt="" class="h-56" data-v-4d48fd2c><div class="flex items-center justify-center space-x-1 text-sm text-gray-700" data-v-4d48fd2c><svg fill="none" class="w-10 h-10 animate-spin" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" data-v-4d48fd2c><path clip-rule="evenodd" d="M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z" fill="currentColor" fill-rule="evenodd" data-v-4d48fd2c></path></svg><div class="text-lg" data-v-4d48fd2c>Please wait ...</div></div>',2),Ve=[Pe],qe={setup(a){const{successShow:v}=q(),{showResult:d}=R(),t=p([]),r=p(!0),c=p(!1),w=p(!0),N=p(Date.now()),k=p(!1),D=J(),b=p(!1),{getExam:Y}=V(),n=Y(),$=p(null);(async()=>{w.value=!0;const{data:u}=await Q(`/exam/${n._id}/question`);t.value=u.questions,k.value=u.hasParticiapted;let m=n.duration;$.value=Date.now()+m*6e4;let h=localStorage.getItem(`medi24attempt${n._id}`);h?localStorage.setItem(`medi24attempt${n._id}`,Number(h)+1):localStorage.setItem(`medi24attempt${n._id}`,1),N.value=Date.now(),setTimeout(()=>{S()},m*6e4),w.value=!1})();const B=()=>{b.value=!0,r.value=!0,$.value=Date.now()+n.duration*6e4,setTimeout(()=>{S()},n.duration*6e4)},A=(u,m)=>{t.value[u].selected=m},{token:E}=X();E||D.replace("/login");const S=async()=>{try{c.value=!0;let u=t.value.map(i=>{let _=i.options.indexOf(i.selected);return{id:i.id,s:_}}).filter(i=>i.s>-1);if(b.value){let i=t.value.reduce((_,g)=>(g.answer==g.selected?_+=1:g.selected&&(_-=.25),_),0);d(i,"retake"),b.value=!1,c.value=!1;return}let m=Number(localStorage.getItem(`medi24attempt${n._id}`));const{data:h}=await Q.post("/exam/submit",{exam:n._id,attempt:m,answers:u,duration:Date.now()-N.value});v("Submitted successfully","Wait for the result to be published."),setTimeout(()=>{D.replace("/")},3e3),c.value=!1}catch(u){console.log(u)}};return(u,m)=>(s(),o(M,null,[!w.value&&!b.value&&(l(n).is_ended||k.value)?(s(),o("div",fe,[e("div",xe,[e("h1",be,f(l(n).title),1),e("p",ge,f(l(n).subject),1),k.value?(s(),o("p",we," You have already participated in this exam. ")):T("",!0),l(n).solution_published?(s(),o("div",ye,[ke,e("button",{onClick:B,class:"px-4 py-2 mt-3 font-semibold text-white bg-green-500 rounded-md shadow-sm hover:cursor-pointer hover:shadow-lg"},"Practice Now ")])):(s(),o("div",$e," You can practice this exam after the solution is published. "))])])):!w.value||b.value?(s(),o("div",Se,[t.value.length>0?(s(),o("div",Te,[e("div",Me,[e("h1",{class:"text-2xl font-bold text-gray-900",innerHTML:l(n).title},null,8,Ce),Ie]),e("div",Ne,[(s(!0),o(M,null,L(t.value,(h,i)=>(s(),o("div",{key:i,class:C(["p-5 mx-auto my-3 text-lg bg-white border border-gray-300 rounded-md shadow-lg kalpurush",{"stop-events":t.value[i].selected}])},[e("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:h.question},null,8,De),e("div",Le,[e("button",He,"Q No: "+f(i+1),1),Qe]),e("div",je,[(s(!0),o(M,null,L(h.options,(_,g)=>(s(),o("div",{key:g,innerHTML:_,onClick:Ge=>A(i,_),class:C(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-black  my-3 p-3 rounded    ${_==h.selected?"border-2 border-green-500 bg-green-300":" bg-white border"}`)},null,10,Re))),128))])],2))),128)),e("div",Ye,[e("button",{onClick:m[0]||(m[0]=h=>S()),disabled:c.value,class:C(["shadow-md btn",{loading:c.value}])},f(c.value?"Loading...":"Submit"),11,Be)])])])):T("",!0),r.value?(s(),o("div",Ae,[x(ne,{end_time:$.value},null,8,["end_time"])])):T("",!0)])):(s(),o("div",Ee,Ve)),x(z),x(he)],64))}};var Ze=j(qe,[["__scopeId","data-v-4d48fd2c"]]);export{Ze as default};
