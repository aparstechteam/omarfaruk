import{u as $}from"./examStore.1642e4c6.js";import"./lodash.296d048a.js";import{u as k}from"./userStore.361da934.js";import{m as R,a as L}from"./formatData.16acd92b.js";import{a as f}from"./api.4c201a75.js";import{m as E,l as m,r as N,o as r,c as i,a as e,u as _,t as o,f as S,F as v,b as j,g as x,d as T,w as U,H as V}from"./index.de171001.js";const A={class:"text-center"},B=e("h1",{class:"my-4 text-3xl font-bold text-center text-gray-900"},"\u09AB\u09B2\u09BE\u09AB\u09B2",-1),P={key:0},D={class:"flex justify-between max-w-xl mx-auto my-5"},F={class:"max-w-xl mx-auto my-3"},O={class:"form-control"},W={class:"mt-4"},q={key:0},z={class:"flex items-center justify-center w-10 h-10 font-semibold text-white bg-green-500 rounded-full"},H={class:"flex-1 ml-2 text-gray-900 md:ml-4"},K={class:"text-lg font-semibold"},G={class:"text-sm text-gray-500"},I={class:"text-green-500"},J=x(" | "),M={class:"text-red-500"},Q={class:"flex items-center justify-center w-10 h-10 p-2 font-semibold text-center text-gray-900 rounded-full aspect-square"},X={key:1,class:"text-center"},Y=e("button",{class:"btn loader btn-primary"},"Loading...",-1),Z=[Y],ce={setup(ee){const{getExam:b}=$(),h=E(),u=b(h.params.id),c=m([]),d=m([]);m(null),k();const p=m(!1),g=async()=>{let{data:n}=await f.get(`/exam/${h.params.id}/leaderboard?admin=true`);c.value=n.map((s,l)=>({position:l+1,duration:R(s.duration,u.duration*6e4),score:s.marks,name:s.user.name,phone:s.user.phone,attempt:s.attempt,college:s.user.institute,status:s.status,correct:s.correct,wrong:s.wrong})),d.value=c.value};g();const w=n=>{let s=n.target.value;s?d.value=c.value.filter(l=>l.name.toLowerCase().includes(s.toLowerCase())):d.value=c.value},y=async()=>{p.value=!0;const n=prompt("Enter password to calculate result");await f.post(`/exam/${u._id}/calculate-result?password=${n}`),p.value=!1,g()},C=()=>{let n=`Position,Name,College,Phone,Duration,Score,Correct,Wrong
`;c.value.forEach(a=>{n+=`${a.position},${a.name},${a.college.replace(/\,/g," ")},${a.phone},${a.duration},${a.score},${a.correct},${a.wrong}
`});const s=new Blob([n],{type:"text/csv"}),l=window.URL.createObjectURL(s),t=document.createElement("a");t.setAttribute("hidden",""),t.setAttribute("href",l),t.setAttribute("download",`${u.title}.csv`),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),t.remove()};return(n,s)=>{const l=N("spa");return r(),i(v,null,[e("div",A,[B,_(u)?(r(),i("h2",P,o(_(u).title),1)):S("",!0),e("h3",null," Total Participants: "+o(c.value.length),1)]),e("div",D,[e("button",{onClick:y,class:"px-5 py-2 font-semibold text-white bg-blue-500 rounded-md"},o(p.value?"Calculating...":"Calculate Result"),1),e("button",{onClick:C,class:"px-5 py-2 font-semibold text-white bg-green-500 rounded-md"}," Export to CSV ")]),e("div",F,[e("div",O,[e("input",{placeholder:"\u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09B0\u09CD\u09A5\u09C0 \u0985\u09A5\u09AC\u09BE \u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09AA\u09CD\u09B0\u09A4\u09BF\u09B7\u09CD\u09A0\u09BE\u09A8\u09C7\u09B0 \u09A8\u09BE\u09AE \u09A6\u09BF\u09DF\u09C7 \u0996\u09C1\u0981\u099C\u09C1\u09A8... ",onKeyup:w,class:"rounded-md input input-bordered"},null,32)]),e("div",W,[c.value.length>0?(r(),i("div",q,[(r(!0),i(v,null,j(d.value,(t,a)=>(r(),i("div",{key:a,class:"flex items-center px-3 py-2 mb-2 border shadow-sm rounded-2xl"},[e("span",z,o(_(L)(t.position)),1),e("div",H,[e("h2",K,o(t.name),1),e("p",null,o(t.college),1),e("p",G,[x(" Attempts: "+o(t.attempt)+", \u09B8\u09AE\u09DF: "+o(t.duration)+" \u09AE\u09BF\u09A8\u09BF\u099F ",1),T(l,{class:V({"text-green-500":t.status==="completed","text-red-500":t.status==="pending"})},{default:U(()=>[x(" Status: "+o(t.status==="completed"?"Calculated":"Not Calculated"),1)]),_:2},1032,["class"])]),e("p",null,[e("span",I,"Correct: "+o(t.correct),1),J,e("span",M,"Wrong: "+o(t.wrong),1)])]),e("div",Q,[e("span",null,o(t.score),1)])]))),128))])):(r(),i("div",X,Z))])])],64)}}};export{ce as default};
